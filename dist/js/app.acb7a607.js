(function(t){function e(e){for(var n,i,r=e[0],c=e[1],l=e[2],d=0,p=[];d<r.length;d++)i=r[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(p.length)p.shift()();return a.push.apply(a,l||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],n=!0,r=1;r<s.length;r++){var c=s[r];0!==o[c]&&(n=!1)}n&&(a.splice(e--,1),t=i(i.s=s[0]))}return t}var n={},o={app:0},a=[];function i(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=n,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;a.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"035e":function(t,e,s){},"17e5":function(t,e,s){},1855:function(t,e,s){},"20b9":function(t,e,s){"use strict";s("8e8b")},2395:function(t,e,s){},3147:function(t,e,s){},"317e":function(t,e,s){},4164:function(t,e,s){"use strict";s("af0a")},"43f2":function(t,e,s){t.exports=s.p+"img/logo.3ab12be0.jpeg"},4578:function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var n=s("2b0e"),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("keep-alive",[s("router-view")],1)],1)},a=[],i=(s("7c55"),s("2877")),r={},c=Object(i["a"])(r,o,a,!1,null,null,null),l=c.exports,u=(s("ac1f"),s("5319"),s("8c4f")),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"login-container"},[t._m(0),s("div",{staticClass:"input-wrap"},[s("el-input",{staticClass:"input",attrs:{placeholder:"请输入用户名"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),s("el-input",{staticClass:"input",attrs:{placeholder:"请输入密码","show-password":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),s("div",{staticClass:"login"},[s("el-button",{staticClass:"login-button",on:{click:t.login}},[t._v("登录")]),s("router-link",{staticClass:"register-link",attrs:{to:"/register"}},[t._v("注册")]),s("router-link",{staticClass:"changepwd-link",attrs:{to:"/changepwd"}},[t._v("修改密码")])],1),s("div",{staticClass:"quote"},[t._v("耽误太多时间，事情可就做不完了")]),s("div",{staticClass:"quote-author"},[t._v("-- 玉衡星 刻晴")])])])},p=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("img",{staticClass:"logo",attrs:{src:s("43f2"),alt:""}})])}],f=s("1da1"),h=(s("96cf"),s("d3b7"),s("bc3a")),m=s.n(h),v=s("5c96"),g=s.n(v);function w(){return _.apply(this,arguments)}function _(){return _=Object(f["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=localStorage.getItem("token"),!e){t.next=5;break}return t.abrupt("return",m.a.post("/verify",{token:e}));case 5:return t.abrupt("return",Promise.resolve(!1));case 6:case"end":return t.stop()}}),t)}))),_.apply(this,arguments)}function b(t,e){"success"===e?Object(v["Notification"])({message:t,duration:2500,position:"bottom-right",type:"success"}):"error"===e?v["Notification"].error({message:t,duration:2500,position:"bottom-right"}):"warning"===e?Object(v["Notification"])({message:t,duration:2500,position:"bottom-right",type:"warning"}):Object(v["Notification"])({message:t,duration:2500,position:"bottom-right"})}var k={name:"LoginPage",data:function(){return{username:sessionStorage.getItem("username"),password:sessionStorage.getItem("password")}},methods:{login:function(){var t=this;localStorage.removeItem("token"),this.$axios.post("/login",{username:this.username,password:this.password}).then((function(e){b(e.data.msg,0===e.data.err?"success":"error"),0===e.data.err&&(localStorage.setItem("token",e.data.token),t.$router.replace("./home"))}))}},beforeCreate:function(){var t=this;w().then((function(e){var s;0===(null===(s=e.data)||void 0===s?void 0:s.err)&&t.$router.replace("./home")}))}},C=k,y=(s("8e52"),Object(i["a"])(C,d,p,!1,null,"d2563348",null)),x=y.exports,O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"register-container"},[t._m(0),s("div",{staticClass:"input-wrap"},[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"用户名格式：5-16字节，允许字母、数字、下划线、@、.",placement:"top-start"}},[s("el-input",{staticClass:"input",attrs:{placeholder:"用户名"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"密码格式：8-16字节，必须包含大小写字母、数字，可以使用特殊字符",placement:"top-start"}},[s("el-input",{staticClass:"input",attrs:{placeholder:"密码","show-password":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),s("el-input",{staticClass:"input",attrs:{placeholder:"再次输入密码","show-password":""},model:{value:t.password2,callback:function(e){t.password2=e},expression:"password2"}})],1),s("div",{staticClass:"buttons"},[s("el-button",{on:{click:t.register}},[t._v("注册")]),s("router-link",{staticClass:"back-link",attrs:{to:"/login"}},[t._v("返回")])],1)])])},S=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("img",{staticClass:"logo",attrs:{src:s("43f2"),alt:""}})])}],$={name:"RegisterPage",data:function(){return{username:"",password:"",password2:""}},methods:{register:function(){var t=this;this.password===this.password2?this.$axios.post("/register",{username:this.username,password:this.password}).then((function(e){b(e.data.msg,0===e.data.err?"success":"error"),0===e.data.err&&(sessionStorage.setItem("username",t.username),sessionStorage.setItem("password",t.password),t.$router.push("./login"))})):b("两次输入的密码不一致","error")}}},j=$,E=(s("7e7c"),Object(i["a"])(j,O,S,!1,null,"4a574f9a",null)),N=E.exports,P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("NavBar",{attrs:{isHome:!0}}),s("Function",{attrs:{title:"待办事项",enTitle:"TodoList",iconName:"el-icon-s-order",linkTo:"/todolist"}}),s("Function",{attrs:{title:"关于",enTitle:"About",iconName:"el-icon-info",linkTo:"/about"}})],1)},T=[],I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"nav-bar-container"},[t.isHome?n("img",{staticClass:"logo",attrs:{src:s("43f2"),alt:""}}):t._e(),t.isHome?n("div",{staticClass:"title"},[t._v("功能列表")]):t._e(),t.isHome?t._e():n("el-page-header",{staticClass:"navbar-header",attrs:{content:this.title},on:{back:t.gotoHome}}),n("div",{staticClass:"popover-icons"},[Object.keys(t.$slots).includes("help")?n("el-popover",[t._t("help"),n("i",{staticClass:"el-icon-question icon",attrs:{slot:"reference"},slot:"reference"})],2):t._e(),Object.keys(t.$slots).includes("option")?n("el-popover",[t._t("option"),n("i",{staticClass:"el-icon-s-tools icon",attrs:{slot:"reference"},slot:"reference"})],2):t._e(),n("el-popover",[n("div",[t._v("当前用户：")]),n("div",[t._v(t._s(t.username))]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.logout}},[t._v("登出")]),n("i",{staticClass:"el-icon-user-solid icon",attrs:{slot:"reference"},slot:"reference"})],1)],1)],1),n("div",{staticClass:"divider"})])},B=[],L=(s("1276"),s("e762")),H={name:"NavBar",props:{title:String,isHome:{type:Boolean,default:!1}},methods:{gotoHome:function(){this.$router.push("/home")},logout:function(){localStorage.removeItem("token"),this.$router.push("/login")}},data:function(){return{username:""}},created:function(){var t=localStorage.getItem("token").split(".")[1];this.username=JSON.parse(Object(L["a"])(t)).username}},W=H,F=(s("97c7"),s("dcf1"),Object(i["a"])(W,I,B,!1,null,"4bf950b2",null)),z=F.exports,M=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"function"},[s("div",{staticClass:"detail-wrapper",on:{click:t.jump}},[s("i",{class:this.iconName,attrs:{id:"icon"}}),s("div",{staticClass:"title"},[t._v(t._s(this.title))]),s("div",{staticClass:"en-title"},[t._v(t._s(this.enTitle))])])])},R=[],J={name:"Function",props:["title","enTitle","iconName","linkTo"],methods:{jump:function(){this.$router.push(this.linkTo)}}},q=J,D=(s("20b9"),Object(i["a"])(q,M,R,!1,null,"4e717acd",null)),U=D.exports,A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-with-footer"},[s("div",{staticClass:"content-wrap"},[t._t("default")],2),t._m(0)])},V=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"footer"},[s("div",{staticClass:"divider"}),s("div",{staticClass:"footer-detail"},[s("a",{attrs:{href:"https://beian.miit.gov.cn"}},[t._v("津ICP备2021004586号-1")])])])}],G={name:"PageWithFooter"},K=G,Q=(s("c436"),Object(i["a"])(K,A,V,!1,null,"7110dbdc",null)),X=Q.exports,Y={name:"HomePage",components:{NavBar:z,Function:U,PageWithFooter:X}},Z=Y,tt=Object(i["a"])(Z,P,T,!1,null,"49c3a44d",null),et=tt.exports,st=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("NavBar",{attrs:{title:"待办事项",showHelp:!0},scopedSlots:t._u([{key:"help",fn:function(){return[s("div",{staticStyle:{margin:".1rem .2rem"}},[s("h3",{staticStyle:{margin:"0",color:"black"}},[t._v("帮助：")]),s("p",[t._v("    在输入框中输入内容后，pc端按回车，手机端按输入法右下角的键（可能叫前往，确定等），即可添加提醒事项")]),s("p",[t._v("    已添加的提醒事项单击内容即可修改")]),s("p",[t._v("    进行增加、修改、删除操作后，点击保存，出现保存成功字样，提醒事项才可以同步到服务器哦")]),s("p",{staticStyle:{color:"red"}},[t._v("    注意：请不要存储重要数据，例如银行卡账号密码等")])])]},proxy:!0}])}),s("div",{staticClass:"todolist-container"},[s("el-input",{attrs:{placeholder:"写点什么吧",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit.apply(null,arguments)}},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),s("div",{staticClass:"content-container"},t._l(t.todo_items_list,(function(e,n){return s("div",{key:n},[s("TodoContent",{attrs:{item:e},on:{"update:item":function(t){e=t},"blur-event":t.save}})],1)})),0),s("div",{staticClass:"buttons"},[s("el-button",{directives:[{name:"show",rawName:"v-show",value:t.atLeastOneChecked,expression:"atLeastOneChecked"}],attrs:{type:"primary",size:"mini"},on:{click:t.clear}},[t._v("清除已完成的")]),s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.save(!0)}}},[t._v("保存")]),s("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:this.todo_items_list.length,expression:"this.todo_items_list.length"}],staticClass:"select-all",model:{value:t.allChecked,callback:function(e){t.allChecked=e},expression:"allChecked"}})],1)],1)],1)},nt=[],ot=s("b85c"),at=(s("99af"),s("4de4"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"todo-content"},[s("el-input",{staticClass:"text",attrs:{type:"textarea",autosize:""},on:{blur:t.emitBlurEvent},model:{value:t.item.content,callback:function(e){t.$set(t.item,"content",e)},expression:"item.content"}}),s("el-checkbox",{model:{value:t.item.checked,callback:function(e){t.$set(t.item,"checked",e)},expression:"item.checked"}})],1)}),it=[],rt={name:"TodoContent",props:["item"],methods:{emitBlurEvent:function(){this.$emit("blur-event")}}},ct=rt,lt=(s("824c"),s("4164"),Object(i["a"])(ct,at,it,!1,null,"0342841a",null)),ut=lt.exports,dt={name:"TodoListPage",components:{NavBar:z,TodoContent:ut},data:function(){return{text:"",todo_items_list:[],ws:null}},computed:{atLeastOneChecked:function(){return this.todo_items_list.some((function(t){return t.checked}))},allChecked:{get:function(){return this.todo_items_list.every((function(t){return t.checked}))},set:function(){if(this.allChecked){var t,e=Object(ot["a"])(this.todo_items_list);try{for(e.s();!(t=e.n()).done;){var s=t.value;s.checked=!1}}catch(i){e.e(i)}finally{e.f()}}else{var n,o=Object(ot["a"])(this.todo_items_list);try{for(o.s();!(n=o.n()).done;){var a=n.value;a.checked=!0}}catch(i){o.e(i)}finally{o.f()}}}}},methods:{establishWebSocketConnection:function(){var t=this;if(this.ws)console.log("连接已建立，无需重复建立");else try{var e=Date.now();this.ws=new WebSocket("ws://".concat(this.$baseURL,"/socket/todolist?session=").concat(e,"&token=").concat(localStorage.getItem("token"))),this.ws.onopen=function(){console.log("已请求建立ws连接，等待服务器响应,session:".concat(e))},this.ws.onmessage=function(e){var s=JSON.parse(e.data);0===s.status_code?t.todo_items_list=s.data:console.log(s.msg)},this.ws.onclose=function(){console.log("连接已关闭")}}catch(s){console.log("连接建立失败"),console.log(s)}},submit:function(){""!==this.text&&(this.todo_items_list.push({content:this.text,checked:!1}),this.text="",this.save())},clear:function(){this.todo_items_list=this.todo_items_list.filter((function(t){return!0!==t.checked})),this.save()},save:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.ws?(this.ws.send(JSON.stringify(this.todo_items_list)),t&&b("保存成功！","success")):console.log("websocket连接不存在，无法发送数据！")}},created:function(){this.establishWebSocketConnection()},deactivated:function(){this.save()},beforeDestroy:function(){this.save()}},pt=dt,ft=(s("bdc8"),Object(i["a"])(pt,st,nt,!1,null,"4d2ba51b",null)),ht=ft.exports,mt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("PageWithFooter",[s("NavBar",{attrs:{title:"关于"}}),s("div",{staticClass:"content"},[s("h3",[t._v("功能介绍：")]),s("p",[t._v("    目前只有提醒事项功能，更多功能已经在开发完善中了")]),s("h3",[t._v("关于作者：")]),s("p",[t._v("    我叫刘志昊，来自南开大学软件工程专业二学位班")]),s("p",[t._v("    为了解决手机提醒事项app不能跨iOS、Mac和Windows同步的问题，顺便学习编程，99todo在2021.10.6上线啦～")]),s("p",[t._v("    本项目前端使用Vue+element-ui搭建，后端使用nodejs+koa2+MongoDB")]),s("p",[t._v("    源码地址：github.com/18630937603")]),s("h3",[t._v("更新日志：")]),s("div",{staticStyle:{"white-space":"pre-wrap"}},[s("p",[t._v(t._s(t.change_log))])])])],1)},vt=[],gt={name:"AboutPage",components:{NavBar:z,PageWithFooter:X},data:function(){return{change_log:"\n\nv1.1，2021.10.17\n\n    todolist现在会自动保存并同步到服务器\n    todolist现在可以实时更新到多开的其他窗口\n\nv1.0.2，2021.10.9\n\n    增加了全选按钮\n    增加了修改密码功能\n    修复移动端按钮不靠右的bug\n    限制了最大宽度，改进了pc端浏览体验\n\nv1.0.1，2021.10.8\n\n    将消息提示位置改为右下角，避免遮挡导航条按钮\n    增加了登出功能\n    增加了关于页面和页脚\n    加入了todolist的使用帮助\n\n    代码相关：\n    全局路由守卫现在也会阻拦无效token\n\nv1.0，2021.10.6\n\n    99todo上线啦！支持注册，登录，提醒事项功能\n    提醒事项功能可以进行提醒的添加、删除、修改、保存到服务器。\n      "}}},wt=gt,_t=(s("5963"),Object(i["a"])(wt,mt,vt,!1,null,"48226f02",null)),bt=_t.exports,kt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"changepwd-container"},[t._m(0),s("div",{staticClass:"input-wrap"},[s("el-input",{staticClass:"input",attrs:{placeholder:"用户名"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),s("el-input",{staticClass:"input",attrs:{placeholder:"原密码","show-password":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"密码格式：8-16字节，必须包含大小写字母、数字，可以使用特殊字符",placement:"top-start"}},[s("el-input",{staticClass:"input",attrs:{placeholder:"新密码","show-password":""},model:{value:t.new_password,callback:function(e){t.new_password=e},expression:"new_password"}})],1),s("el-input",{staticClass:"input",attrs:{placeholder:"再次输入新密码","show-password":""},model:{value:t.new_password2,callback:function(e){t.new_password2=e},expression:"new_password2"}})],1),s("div",{staticClass:"buttons"},[s("el-button",{on:{click:t.changepwd}},[t._v("确认修改")]),s("router-link",{staticClass:"back-link",attrs:{to:"/login"}},[t._v("返回")])],1)])])},Ct=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("img",{staticClass:"logo",attrs:{src:s("43f2"),alt:""}})])}],yt={name:"ChangePwdPage",data:function(){return{username:"",password:"",new_password:"",new_password2:""}},methods:{changepwd:function(){var t=this;this.new_password===this.new_password2?this.password!==this.new_password?this.$axios.post("/changepwd",{username:this.username,password:this.password,new_password:this.new_password}).then((function(e){b(e.data.msg,0===e.data.err?"success":"error"),0===e.data.err&&(sessionStorage.setItem("username",t.username),sessionStorage.setItem("password",t.new_password),t.$router.push("./login"))})):b("旧密码与原密码相同，无需修改","warning"):b("两次输入的新密码不一致","error")}}},xt=yt,Ot=(s("6235"),Object(i["a"])(xt,kt,Ct,!1,null,"f4fbc4b4",null)),St=Ot.exports,$t=u["a"].prototype.push;u["a"].prototype.push=function(t){return $t.call(this,t).catch((function(t){return t}))},n["default"].use(u["a"]);var jt=[{path:"/login",component:x,alias:"/"},{path:"/register",component:N},{path:"/home",component:et},{path:"/todolist",component:ht},{path:"/about",component:bt},{path:"/changepwd",component:St}],Et=new u["a"]({routes:jt});Et.beforeEach((function(t,e,s){if("/login"===t.path||"/register"===t.path||"/changepwd"===t.path)return s();var n=localStorage.getItem("token");n?(s(),w().then((function(t){0!==t.data.err&&(localStorage.removeItem("token"),Et.replace("/login"))}))):Et.replace("/login")}));var Nt=Et,Pt=s("2f62");n["default"].use(Pt["a"]);var Tt=new Pt["a"].Store({state:{},mutations:{},actions:{},modules:{}});s("0fae");n["default"].config.productionTip=!1;var It="www.lzh0129.top:8081";n["default"].prototype.$axios=m.a,n["default"].prototype.$baseURL=It,m.a.defaults.baseURL="http://".concat(It),n["default"].use(g.a),new n["default"]({router:Nt,store:Tt,render:function(t){return t(l)}}).$mount("#app");var Bt=350,Lt=500;function Ht(){var t=document.documentElement.clientWidth;document.documentElement.style.fontSize=t>Lt?Lt/360*50+"px":t<Bt?Bt/360*50+"px":t/360*50+"px"}Ht(),window.addEventListener("resize",Ht)},5963:function(t,e,s){"use strict";s("b41e")},6235:function(t,e,s){"use strict";s("1855")},"7c55":function(t,e,s){"use strict";s("2395")},"7e7c":function(t,e,s){"use strict";s("17e5")},"824c":function(t,e,s){"use strict";s("317e")},"836b":function(t,e,s){},"8e52":function(t,e,s){"use strict";s("836b")},"8e8b":function(t,e,s){},"97c7":function(t,e,s){"use strict";s("035e")},adf8:function(t,e,s){},af0a:function(t,e,s){},b41e:function(t,e,s){},bdc8:function(t,e,s){"use strict";s("adf8")},c436:function(t,e,s){"use strict";s("3147")},dcf1:function(t,e,s){"use strict";s("4578")}});
//# sourceMappingURL=app.acb7a607.js.map